{% extends "public/templates/public_template.html" %}

{% block title %}Account{% endblock %}

{% block main %}

<div class="container">
  <div class="row">
    <div class="col">
		<div class="content-section">
		  	<div class="media">
		    	<img class="rounded-circle account-img" src="{{ image_file }}">
		    	<div class="media-body">
		      		<h2 class="account-heading">{{ current_user.username }}</h2>
		      		<p class="text-secondary">{{ current_user.email }}</p>
		    	</div>
		  	</div>
			<form method ="POST" action ="" enctype="multipart/form-data">
				{{ form.hidden_tag() }}
				<fieldset class="form-group">
					<legend class = "border-bottom mb-4"> Account Info</legend>
					<div class = "form-group">
						{{ form.username.label(class="form-control-label") }}

						{% if form.username.errors %}	
							{{ form.username(class="form-control form-control-lg is-invalid") }}
							<div class="invalid-feedback">
								{% for error in form.username.errors %}
									<span>{{ error }}</span>
								{% endfor %}
							</div>
						{% else %}
							{{ form.username(class="form-control form-control-lg") }}
						{% endif %}

					</div>
					<div class = "form-group">
						{{ form.email.label(class="form-control-label") }}
						{% if form.email.errors %}	
							{{ form.email(class="form-control form-control-lg is-invalid") }}
							<div class="invalid-feedback">
								{% for error in form.email.errors %}
									<span>{{ error }}</span>
								{% endfor %}
							</div>
						{% else %}
							{{ form.email(class="form-control form-control-lg") }}
						{% endif %}
					</div>
					<div class = "form-group">
						{{ form.picture.label() }}
						{{ form.picture(class = "form-control-file") }}
						{% if form.picture.errors %}
							{% for error in form.picture.errors %}
								<span class="text-danger">{{ error }}</span></br>
							{% endfor %}
						{% endif %}
					</div>
					<div class = "form-group">
						{{ form.zipcode.label(class="form-control-label") }}

						{% if form.zipcode.errors %}	
							{{ form.zipcode(class="form-control form-control-lg is-invalid") }}
							<div class="invalid-feedback">
								{% for error in form.zipcode.errors %}
									<span>{{ error }}</span>
								{% endfor %}
							</div>
						{% else %}
							{{ form.zipcode(class="form-control form-control-lg") }}
						{% endif %}
					</div>	
					<div class = "form-group">
						<p>Registered Child</p>
						<ul id = "ul">
							{% if children %}
								{% for child in children %}
									<li>{{ child.cfirst }} {{ child.clast }}</li>
								{% endfor %}
							{% else %}
								<p><strong>No child registered</strong></p>	
							{% endif %}
							</ul>
						<a class="" href="{{ url_for ('add_child') }}">Register an addiotnal child</a>
					</div>	
				</fieldset>
				<div class ="form-group">
					{{ form.submit(class="btn btn-outline-info")}}
				</div>
			</form>
    	</div>
  	</div>
</div>

{% endblock %}
